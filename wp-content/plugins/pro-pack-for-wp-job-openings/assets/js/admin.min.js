!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(m){m.extend(m.fn,{validate:function(e){if(this.length){var s=m.data(this[0],"validator");return s||(this.attr("novalidate","novalidate"),s=new m.validator(e,this[0]),m.data(this[0],"validator",s),s.settings.onsubmit&&(this.on("click.validate",":submit",function(e){s.settings.submitHandler&&(s.submitButton=e.target),m(this).hasClass("cancel")&&(s.cancelSubmit=!0),void 0!==m(this).attr("formnovalidate")&&(s.cancelSubmit=!0)}),this.on("submit.validate",function(a){function e(){var e,t;return!s.settings.submitHandler||(s.submitButton&&(e=m("<input type='hidden'/>").attr("name",s.submitButton.name).val(m(s.submitButton).val()).appendTo(s.currentForm)),t=s.settings.submitHandler.call(s,s.currentForm,a),s.submitButton&&e.remove(),void 0!==t&&t)}return s.settings.debug&&a.preventDefault(),s.cancelSubmit?(s.cancelSubmit=!1,e()):s.form()?s.pendingRequest?!(s.formSubmitted=!0):e():(s.focusInvalid(),!1)})),s)}e&&e.debug&&window.console},valid:function(){var e,t,a;return m(this[0]).is("form")?e=this.validate().form():(a=[],e=!0,t=m(this[0].form).validate(),this.each(function(){(e=t.element(this)&&e)||(a=a.concat(t.errorList))}),t.errorList=a),e},rules:function(e,t){if(this.length){var a,s,i,n,r,o,l=this[0];if(e)switch(s=(a=m.data(l.form,"validator").settings).rules,i=m.validator.staticRules(l),e){case"add":m.extend(i,m.validator.normalizeRule(t)),delete i.messages,s[l.name]=i,t.messages&&(a.messages[l.name]=m.extend(a.messages[l.name],t.messages));break;case"remove":return t?(o={},m.each(t.split(/\s/),function(e,t){o[t]=i[t],delete i[t],"required"===t&&m(l).removeAttr("aria-required")}),o):(delete s[l.name],i)}return(n=m.validator.normalizeRules(m.extend({},m.validator.classRules(l),m.validator.attributeRules(l),m.validator.dataRules(l),m.validator.staticRules(l)),l)).required&&(r=n.required,delete n.required,n=m.extend({required:r},n),m(l).attr("aria-required","true")),n.remote&&(r=n.remote,delete n.remote,n=m.extend(n,{remote:r})),n}}}),m.extend(m.expr[":"],{blank:function(e){return!m.trim(""+m(e).val())},filled:function(e){var t=m(e).val();return null!==t&&!!m.trim(""+t)},unchecked:function(e){return!m(e).prop("checked")}}),m.validator=function(e,t){this.settings=m.extend(!0,{},m.validator.defaults,e),this.currentForm=t,this.init()},m.validator.format=function(a,e){return 1===arguments.length?function(){var e=m.makeArray(arguments);return e.unshift(a),m.validator.format.apply(this,e)}:(void 0===e||(2<arguments.length&&e.constructor!==Array&&(e=m.makeArray(arguments).slice(1)),e.constructor!==Array&&(e=[e]),m.each(e,function(e,t){a=a.replace(new RegExp("\\{"+e+"\\}","g"),function(){return t})})),a)},m.extend(m.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:m([]),errorLabelContainer:m([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(e)))},onfocusout:function(e){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(e,t){9===t.which&&""===this.elementValue(e)||-1!==m.inArray(t.keyCode,[16,17,18,20,35,36,37,38,39,40,45,144,225])||(e.name in this.submitted||e.name in this.invalid)&&this.element(e)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(e,t,a){"radio"===e.type?this.findByName(e.name).addClass(t).removeClass(a):m(e).addClass(t).removeClass(a)},unhighlight:function(e,t,a){"radio"===e.type?this.findByName(e.name).removeClass(t).addClass(a):m(e).removeClass(t).addClass(a)}},setDefaults:function(e){m.extend(m.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:m.validator.format("Please enter no more than {0} characters."),minlength:m.validator.format("Please enter at least {0} characters."),rangelength:m.validator.format("Please enter a value between {0} and {1} characters long."),range:m.validator.format("Please enter a value between {0} and {1}."),max:m.validator.format("Please enter a value less than or equal to {0}."),min:m.validator.format("Please enter a value greater than or equal to {0}."),step:m.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:!1,prototype:{init:function(){this.labelContainer=m(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||m(this.currentForm),this.containers=m(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var a,s=this.groups={};function e(e){var t=m.data(this.form,"validator"),a="on"+e.type.replace(/^validate/,""),s=t.settings;s[a]&&!m(this).is(s.ignore)&&s[a].call(t,this,e)}m.each(this.settings.groups,function(a,e){"string"==typeof e&&(e=e.split(/\s/)),m.each(e,function(e,t){s[t]=a})}),a=this.settings.rules,m.each(a,function(e,t){a[e]=m.validator.normalizeRule(t)}),m(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable]",e).on("click.validate","select, option, [type='radio'], [type='checkbox']",e),this.settings.invalidHandler&&m(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler),m(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),m.extend(this.submitted,this.errorMap),this.invalid=m.extend({},this.errorMap),this.valid()||m(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(e){var t,a,s=this.clean(e),i=this.validationTargetFor(s),n=this,r=!0;return void 0===i?delete this.invalid[s.name]:(this.prepareElement(i),this.currentElements=m(i),(a=this.groups[i.name])&&m.each(this.groups,function(e,t){t===a&&e!==i.name&&(s=n.validationTargetFor(n.clean(n.findByName(e))))&&s.name in n.invalid&&(n.currentElements.push(s),r=r&&n.check(s))}),t=!1!==this.check(i),r=r&&t,this.invalid[i.name]=!t,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),m(e).attr("aria-invalid",!t)),r},showErrors:function(t){if(t){var a=this;m.extend(this.errorMap,t),this.errorList=m.map(this.errorMap,function(e,t){return{message:e,element:a.findByName(t)[0]}}),this.successList=m.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){m.fn.resetForm&&m(this.currentForm).resetForm(),this.invalid={},this.submitted={},this.prepareForm(),this.hideErrors();var e=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(e)},resetElements:function(e){var t;if(this.settings.unhighlight)for(t=0;e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,""),this.findByName(e[t].name).removeClass(this.settings.validClass);else e.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t,a=0;for(t in e)e[t]&&a++;return a},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(e){e.not(this.containers).text(""),this.addWrapper(e).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{m(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var t=this.lastActive;return t&&1===m.grep(this.errorList,function(e){return e.element.name===t.name}).length&&t},elements:function(){var t=this,a={};return m(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){var e=this.name||m(this).attr("name");return!e&&t.settings.debug&&window.console,this.hasAttribute("contenteditable")&&(this.form=m(this).closest("form")[0]),!(e in a||!t.objectLength(m(this).rules()))&&(a[e]=!0)})},clean:function(e){return m(e)[0]},errors:function(){var e=this.settings.errorClass.split(" ").join(".");return m(this.settings.errorElement+"."+e,this.errorContext)},resetInternals:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=m([]),this.toHide=m([])},reset:function(){this.resetInternals(),this.currentElements=m([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(e){var t,a,s=m(e),i=e.type;return"radio"===i||"checkbox"===i?this.findByName(e.name).filter(":checked").val():"number"===i&&void 0!==e.validity?e.validity.badInput?"NaN":s.val():(t=e.hasAttribute("contenteditable")?s.text():s.val(),"file"===i?"C:\\fakepath\\"===t.substr(0,12)?t.substr(12):0<=(a=t.lastIndexOf("/"))?t.substr(a+1):0<=(a=t.lastIndexOf("\\"))?t.substr(a+1):t:"string"==typeof t?t.replace(/\r/g,""):t)},check:function(t){t=this.validationTargetFor(this.clean(t));var e,a,s,i=m(t).rules(),n=m.map(i,function(e,t){return t}).length,r=!1,o=this.elementValue(t);if("function"==typeof i.normalizer){if("string"!=typeof(o=i.normalizer.call(t,o)))throw new TypeError("The normalizer should return a string value.");delete i.normalizer}for(a in i){s={method:a,parameters:i[a]};try{if("dependency-mismatch"===(e=m.validator.methods[a].call(this,o,t,s.parameters))&&1===n){r=!0;continue}if(r=!1,"pending"===e)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!e)return this.formatAndAdd(t,s),!1}catch(e){throw this.settings.debug&&window.console,e instanceof TypeError&&(e.message+=".  Exception occurred when checking element "+t.id+", check the '"+s.method+"' method."),e}}if(!r)return this.objectLength(i)&&this.successList.push(t),!0},customDataMessage:function(e,t){return m(e).data("msg"+t.charAt(0).toUpperCase()+t.substring(1).toLowerCase())||m(e).data("msg")},customMessage:function(e,t){var a=this.settings.messages[e];return a&&(a.constructor===String?a:a[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]},defaultMessage:function(e,t){var a=this.findDefined(this.customMessage(e.name,t.method),this.customDataMessage(e,t.method),!this.settings.ignoreTitle&&e.title||void 0,m.validator.messages[t.method],"<strong>Warning: No message defined for "+e.name+"</strong>"),s=/\$?\{(\d+)\}/g;return"function"==typeof a?a=a.call(this,t.parameters,e):s.test(a)&&(a=m.validator.format(a.replace(s,"{$1}"),t.parameters)),a},formatAndAdd:function(e,t){var a=this.defaultMessage(e,t);this.errorList.push({message:a,element:e,method:t.method}),this.errorMap[e.name]=a,this.submitted[e.name]=a},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){var e,t,a;for(e=0;this.errorList[e];e++)a=this.errorList[e],this.settings.highlight&&this.settings.highlight.call(this,a.element,this.settings.errorClass,this.settings.validClass),this.showLabel(a.element,a.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(e=0,t=this.validElements();t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return m(this.errorList).map(function(){return this.element})},showLabel:function(e,t){var a,s,i,n,r=this.errorsFor(e),o=this.idOrName(e),l=m(e).attr("aria-describedby");r.length?(r.removeClass(this.settings.validClass).addClass(this.settings.errorClass),r.html(t)):(a=r=m("<"+this.settings.errorElement+">").attr("id",o+"-error").addClass(this.settings.errorClass).html(t||""),this.settings.wrapper&&(a=r.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(a):this.settings.errorPlacement?this.settings.errorPlacement(a,m(e)):a.insertAfter(e),r.is("label")?r.attr("for",o):0===r.parents("label[for='"+this.escapeCssMeta(o)+"']").length&&(i=r.attr("id"),l?l.match(new RegExp("\\b"+this.escapeCssMeta(i)+"\\b"))||(l+=" "+i):l=i,m(e).attr("aria-describedby",l),(s=this.groups[e.name])&&(n=this,m.each(n.groups,function(e,t){t===s&&m("[name='"+n.escapeCssMeta(e)+"']",n.currentForm).attr("aria-describedby",r.attr("id"))})))),!t&&this.settings.success&&(r.text(""),"string"==typeof this.settings.success?r.addClass(this.settings.success):this.settings.success(r,e)),this.toShow=this.toShow.add(r)},errorsFor:function(e){var t=this.escapeCssMeta(this.idOrName(e)),a=m(e).attr("aria-describedby"),s="label[for='"+t+"'], label[for='"+t+"'] *";return a&&(s=s+", #"+this.escapeCssMeta(a).replace(/\s+/g,", #")),this.errors().filter(s)},escapeCssMeta:function(e){return e.replace(/([\\!"#$%&'()*+,./:;<=>?@\[\]^`{|}~])/g,"\\$1")},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name)),m(e).not(this.settings.ignore)[0]},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(e){return m(this.currentForm).find("[name='"+this.escapeCssMeta(e)+"']")},getLength:function(e,t){switch(t.nodeName.toLowerCase()){case"select":return m("option:selected",t).length;case"input":if(this.checkable(t))return this.findByName(t.name).filter(":checked").length}return e.length},depend:function(e,t){return!this.dependTypes[typeof e]||this.dependTypes[typeof e](e,t)},dependTypes:{boolean:function(e){return e},string:function(e,t){return!!m(e,t.form).length},function:function(e,t){return e(t)}},optional:function(e){var t=this.elementValue(e);return!m.validator.methods.required.call(this,t,e)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,m(e).addClass(this.settings.pendingClass),this.pending[e.name]=!0)},stopRequest:function(e,t){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],m(e).removeClass(this.settings.pendingClass),t&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(m(this.currentForm).submit(),this.formSubmitted=!1):!t&&0===this.pendingRequest&&this.formSubmitted&&(m(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e,t){return m.data(e,"previousValue")||m.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,{method:t})})},destroy:function(){this.resetForm(),m(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,t){e.constructor===String?this.classRuleSettings[e]=t:m.extend(this.classRuleSettings,e)},classRules:function(e){var t={},a=m(e).attr("class");return a&&m.each(a.split(" "),function(){this in m.validator.classRuleSettings&&m.extend(t,m.validator.classRuleSettings[this])}),t},normalizeAttributeRule:function(e,t,a,s){/min|max|step/.test(a)&&(null===t||/number|range|text/.test(t))&&(s=Number(s),isNaN(s)&&(s=void 0)),s||0===s?e[a]=s:t===a&&"range"!==t&&(e[a]=!0)},attributeRules:function(e){var t,a,s={},i=m(e),n=e.getAttribute("type");for(t in m.validator.methods)"required"===t?(""===(a=e.getAttribute(t))&&(a=!0),a=!!a):a=i.attr(t),this.normalizeAttributeRule(s,n,t,a);return s.maxlength&&/-1|2147483647|524288/.test(s.maxlength)&&delete s.maxlength,s},dataRules:function(e){var t,a,s={},i=m(e),n=e.getAttribute("type");for(t in m.validator.methods)a=i.data("rule"+t.charAt(0).toUpperCase()+t.substring(1).toLowerCase()),this.normalizeAttributeRule(s,n,t,a);return s},staticRules:function(e){var t={},a=m.data(e.form,"validator");return a.settings.rules&&(t=m.validator.normalizeRule(a.settings.rules[e.name])||{}),t},normalizeRules:function(s,i){return m.each(s,function(e,t){if(!1!==t){if(t.param||t.depends){var a=!0;switch(typeof t.depends){case"string":a=!!m(t.depends,i.form).length;break;case"function":a=t.depends.call(i,i)}a?s[e]=void 0===t.param||t.param:(m.data(i.form,"validator").resetElements(m(i)),delete s[e])}}else delete s[e]}),m.each(s,function(e,t){s[e]=m.isFunction(t)&&"normalizer"!==e?t(i):t}),m.each(["minlength","maxlength"],function(){s[this]&&(s[this]=Number(s[this]))}),m.each(["rangelength","range"],function(){var e;s[this]&&(m.isArray(s[this])?s[this]=[Number(s[this][0]),Number(s[this][1])]:"string"==typeof s[this]&&(e=s[this].replace(/[\[\]]/g,"").split(/[\s,]+/),s[this]=[Number(e[0]),Number(e[1])]))}),m.validator.autoCreateRanges&&(null!=s.min&&null!=s.max&&(s.range=[s.min,s.max],delete s.min,delete s.max),null!=s.minlength&&null!=s.maxlength&&(s.rangelength=[s.minlength,s.maxlength],delete s.minlength,delete s.maxlength)),s},normalizeRule:function(e){if("string"==typeof e){var t={};m.each(e.split(/\s/),function(){t[this]=!0}),e=t}return e},addMethod:function(e,t,a){m.validator.methods[e]=t,m.validator.messages[e]=void 0!==a?a:m.validator.messages[e],t.length<3&&m.validator.addClassRules(e,m.validator.normalizeRule(e))},methods:{required:function(e,t,a){if(!this.depend(a,t))return"dependency-mismatch";if("select"===t.nodeName.toLowerCase()){var s=m(t).val();return s&&0<s.length}return this.checkable(t)?0<this.getLength(e,t):0<e.length},email:function(e,t){return this.optional(t)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)},url:function(e,t){return this.optional(t)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(e).toString())},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(e)},number:function(e,t){return this.optional(t)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},minlength:function(e,t,a){var s=m.isArray(e)?e.length:this.getLength(e,t);return this.optional(t)||a<=s},maxlength:function(e,t,a){var s=m.isArray(e)?e.length:this.getLength(e,t);return this.optional(t)||s<=a},rangelength:function(e,t,a){var s=m.isArray(e)?e.length:this.getLength(e,t);return this.optional(t)||s>=a[0]&&s<=a[1]},min:function(e,t,a){return this.optional(t)||a<=e},max:function(e,t,a){return this.optional(t)||e<=a},range:function(e,t,a){return this.optional(t)||e>=a[0]&&e<=a[1]},step:function(e,t,a){var s=m(t).attr("type"),i="Step attribute on input type "+s+" is not supported.",n=new RegExp("\\b"+s+"\\b");if(s&&!n.test(["text","number","range"].join()))throw new Error(i);return this.optional(t)||e%a==0},equalTo:function(e,t,a){var s=m(a);return this.settings.onfocusout&&s.not(".validate-equalTo-blur").length&&s.addClass("validate-equalTo-blur").on("blur.validate-equalTo",function(){m(t).valid()}),e===s.val()},remote:function(n,r,e,o){if(this.optional(r))return"dependency-mismatch";o="string"==typeof o&&o||"remote";var l,t,a,d=this.previousValue(r,o);return this.settings.messages[r.name]||(this.settings.messages[r.name]={}),d.originalMessage=d.originalMessage||this.settings.messages[r.name][o],this.settings.messages[r.name][o]=d.message,e="string"==typeof e&&{url:e}||e,a=m.param(m.extend({data:n},e.data)),d.old===a?d.valid:(d.old=a,(l=this).startRequest(r),(t={})[r.name]=n,m.ajax(m.extend(!0,{mode:"abort",port:"validate"+r.name,dataType:"json",data:t,context:l.currentForm,success:function(e){var t,a,s,i=!0===e||"true"===e;l.settings.messages[r.name][o]=d.originalMessage,i?(s=l.formSubmitted,l.resetInternals(),l.toHide=l.errorsFor(r),l.formSubmitted=s,l.successList.push(r),l.invalid[r.name]=!1,l.showErrors()):(t={},a=e||l.defaultMessage(r,{method:o,parameters:n}),t[r.name]=d.message=a,l.invalid[r.name]=!0,l.showErrors(t)),d.valid=i,l.stopRequest(r,i)}},e)),"pending")}}});var s,i={};m.ajaxPrefilter?m.ajaxPrefilter(function(e,t,a){var s=e.port;"abort"===e.mode&&(i[s]&&i[s].abort(),i[s]=a)}):(s=m.ajax,m.ajax=function(e){var t=("mode"in e?e:m.ajaxSettings).mode,a=("port"in e?e:m.ajaxSettings).port;return"abort"===t?(i[a]&&i[a].abort(),i[a]=s.apply(this,arguments),i[a]):s.apply(this,arguments)})}),jQuery(document).ready(function(o){var r=o("#awsm-pro-application-id").val(),i=".awsm-pro-activate-notice";o(i).on("click",".notice-dismiss",function(e){e.preventDefault();var t=o(this),a=t.parents(i),s=t.parents(i).data("nonce");o.ajax({url:awsmJobsAdmin.ajaxurl,type:"POST",data:{nonce:s,action:"awsm_job_pro_admin_notice"},dataType:"json"}).done(function(e){e&&e.dismiss&&a.fadeTo(400,0,function(){a.slideUp(100,function(){a.remove()})})})}),o(".awsm-applicant-meta-mail-container").on("click",".awsm-jobs-applicant-mail-header",function(){o(this).parent().toggleClass("open")}),o("ul.awsm-applicant-meta-mail-tabs a").on("click",function(e){e.preventDefault();var t=o(this);if(!t.closest("li").hasClass("tabs")){var a=t.attr("href");o("ul.awsm-applicant-meta-mail-tabs li").removeClass("tabs"),t.closest("li").addClass("tabs"),o(".awsm-applicant-meta-mail-tabs-panel").hide(),o(a).fadeIn()}});var n=o("#awsm-builder-form-options-container"),l=new RegExp("^([a-z0-9]+(-|_))*[a-z0-9]+$");o("#awsm-jobs-form-builder").sortable({items:".awsm-jobs-form-element-main",axis:"y",handle:".awsm-jobs-form-element-head",cursor:"grabbing"}),n.on("click",".awsm-jobs-form-element-head-title",function(){o(this).parents(".awsm-jobs-form-element-main").toggleClass("open")}),n.on("click",".awsm-jobs-form-element-close",function(){o(this).parents(".awsm-jobs-form-element-main").removeClass("open")}),n.parents("#settings-awsm-settings-form").find("form").on("submit",function(e){if(n.is(":visible")){o(".awsm-jobs-error-container").remove();var a={resume:[],photo:[]};o(".awsm-builder-field-select-control").each(function(e){var t=o(this).val();"resume"!==t&&"photo"!==t||a[t].push(e)});var t=wp.template("awsm-pro-fb-error");if(1<a.resume.length||1<a.photo.length){e.preventDefault();var s="";1<a.resume.length&&(s+=t({isFieldType:!0,fieldType:"resume"})),1<a.photo.length&&(s+=t({isFieldType:!0,fieldType:"photo"})),o(".awsm-jobs-form-builder-footer").append(s)}var i=!0;if(o(".awsm-jobs-form-builder-template-tag").each(function(){var e=o(this).val();0<e.length&&!l.test(e)&&(i=!1)}),!i){e.preventDefault();n.find(".awsm-jobs-form-builder-footer").append(t({invalidKey:!0}))}}}),n.on("click",".awsm-add-form-field-row",function(e){e.preventDefault();var t=o("#awsm-jobs-form-builder"),a=t.data("next"),s=wp.template("awsm-pro-fb-settings"),i={index:a};t.data("next",a+1),t.append(s(i)),awsmJobSelectControl(o(".awsm-builder-field-select-control").last())}),n.on("change",".awsm-builder-field-select-control",function(){var e=o(this),t=e.val(),a=e.data("index");a=void 0!==a?a:0;var s=null,i={},n=e.parents(".awsm-jobs-form-builder-type-wrapper").find(".awsm-job-fb-options-container");"select"==t||"checkbox"==t||"radio"==t?(s=wp.template("awsm-pro-fb-field-options"),i={index:a},n.html(s(i)),n.removeClass("hidden")):"file"==t||"photo"==t||"resume"==t?(s=wp.template("awsm-pro-fb-file-options"),i={index:a},n.html(s(i)),n.removeClass("hidden")):(n.html(""),n.addClass("hidden")),n=e.parents(".awsm-jobs-form-element-content").find(".awsm-job-fb-template-key"),"resume"==t||"photo"==t||"file"==t?(n.html(""),n.addClass("hidden")):(s=wp.template("awsm-pro-fb-template-tag"),i={index:a},n.html(s(i)),n.removeClass("hidden"))}),n.on("click",".awsm-form-field-remove-row",function(e){e.preventDefault(),o(this).parents(".awsm-jobs-form-element-main").remove()}),n.on("keyup blur",".awsm_jobs_form_builder_label",function(){var e=o(this),t=e.val(),a=e.parents(".awsm-jobs-form-element-content");0<t.length&&(t=o.trim(t).replace(/\s+/g,"-").toLowerCase(),l.test(t)&&a.find(".awsm-jobs-form-builder-template-tag").val(t))});var d=o(".awsm-applicant-mail-message"),m="awsm-success-message",u="awsm-error-message";o("#awsm_mail_meta_applicant_template").on("change",function(){var e=o(this).val();if(void 0!==e&&0<e.length){d.hide();var t=[{name:"awsm_application_id",value:r},{name:"awsm_template_key",value:e},{name:"action",value:"awsm_job_et_data"}];o.ajax({url:awsmJobsAdmin.ajaxurl,type:"GET",data:o.param(t),dataType:"json"}).done(function(e){e&&(o("#awsm_mail_meta_applicant_subject").val(e.subject),o("#awsm_mail_meta_applicant_content").html(e.content))})}}),o("#awsm-applicant-meta-new-mail").on("click","#awsm_applicant_mail_btn",function(e){e.preventDefault(),o(".awsm-applicant-mail-req-field").prop("required",!0),o("#publish").on("click",function(){o(".awsm-applicant-mail-req-field").removeProp("required")}),o(".awsm-applicant-mail-req-field").valid();var t=o(".awsm-form-control.error");if(0===t.length){d.removeClass(m+" "+u).hide();var a=o(this),s=a.text(),i=a.data("responseText");a.prop("disabled",!0).text(i);var n=o("#awsm-applicant-meta-new-mail").find(".awsm-applicant-mail-field").serializeArray();n.push({name:"nonce",value:awsmProJobsAdmin.nonce},{name:"awsm_application_id",value:r},{name:"action",value:"awsm_applicant_mail"}),o.ajax({url:awsmJobsAdmin.ajaxurl,type:"POST",data:o.param(n),dataType:"json"}).done(function(e){if(e){var t="awsm-default-message",a="",s=[];if(0<e.error.length)t=u,s=e.error;else if(0<e.success.length){o("#awsm_jobs_no_mail_wrapper").remove(),t=m,s=e.success,o("#awsm_mail_meta_applicant_template").val(null).trigger("change"),o("#awsm_mail_meta_applicant_subject").val(""),o("#awsm_mail_meta_applicant_content").val("");var i=e.content,n=wp.template("awsm-pro-applicant-mail"),r={author:i.author,date_i18n:i.date_i18n,subject:i.subject,content:i.content};o("#awsm-jobs-applicant-mails-container").prepend(n(r))}o(s).each(function(e,t){a+="<p>"+t+"</p>"}),d.addClass(t).html(a).fadeIn()}}).always(function(){a.prop("disabled",!1).text(s)})}else t.next("label.error").addClass("awsm-job-form-error")}),o(".awsm-add-mail-templates").on("click",function(e){e.preventDefault();var t=o("#awsm-repeatable-mail-templates"),a=t.data("next");t.find(".awsm-acc-head").removeClass("on"),t.find(".awsm-acc-content").slideUp("normal");var s=wp.template("awsm-pro-notification-settings"),i={index:a};t.find(".awsm-mail-templates-acc-section").append(s(i)),t.find('[data-required="required"]').prop("required",!0),t.data("next",a+1)}),o("#awsm-repeatable-mail-templates").on("click",".awsm-remove-mail-template",function(e){e.preventDefault(),o(this).parents(".awsm-acc-main").remove()}),o("#awsm-repeatable-mail-templates").on("keyup blur",".awsm-jobs-pro-mail-template-name",function(){var e=o(this),t=e.val(),a=e.parents(".awsm-acc-main"),s=a.find(".awsm-jobs-pro-mail-template-title"),i=0<t.length?t:s.text();s.text(i),a.find(".awsm-jobs-pro-mail-template-subtitle").fadeIn()}),o("#awsm_application_notes").on("keypress",function(e){13==e.which&&(e.preventDefault(),function(i){if(0<(i=o.trim(i)).length){var e=[{name:"nonce",value:awsmProJobsAdmin.nonce},{name:"awsm_application_id",value:r},{name:"awsm_application_notes",value:i},{name:"action",value:"awsm_job_pro_notes"}];o.ajax({url:awsmJobsAdmin.ajaxurl,type:"POST",data:o.param(e),beforeSend:function(){o("#awsm_application_notes").prop("disabled",!0),o(".awsm-jobs-application-notes-list").addClass("awsm-jobs-loading")},dataType:"json"}).done(function(e){if(e&&!0===e.update){var t=e.notes_data,a=wp.template("awsm-pro-notes"),s={index:t.index,time:t.time,date_i18n:t.date_i18n,author:t.username,content:i};o(".awsm-jobs-application-notes-list").prepend(a(s)),o("#awsm_application_notes").val("")}}).always(function(){o(".awsm-jobs-application-notes-list").removeClass("awsm-jobs-loading"),o("#awsm_application_notes").prop("disabled",!1)})}}(o(this).val()))});var h=!0;o(".awsm-jobs-application-notes-list").on("click",".awsm-jobs-note-remove-btn",function(e){e.preventDefault();var t=o(this).parents("li.awsm-jobs-note"),a=t.data("index"),s=t.data("time");if(h){h=!1;var i=[{name:"nonce",value:awsmProJobsAdmin.nonce},{name:"awsm_application_id",value:r},{name:"awsm_note_key",value:a},{name:"awsm_note_time",value:s},{name:"action",value:"awsm_job_pro_remove_note"}];o.ajax({url:awsmJobsAdmin.ajaxurl,type:"POST",data:o.param(i),beforeSend:function(){o(".awsm-jobs-application-notes-list").addClass("awsm-jobs-loading")},dataType:"json"}).done(function(e){e&&!0===e.delete&&t.slideUp(function(){o(this).remove();var e=o("li.awsm-jobs-note"),a=e.length;e.each(function(e){var t=a-(e+1);o(this).data("index",t),o(this).attr("data-index",t)}),h=!0})}).fail(function(){h=!0}).always(function(){o(".awsm-jobs-application-notes-list").removeClass("awsm-jobs-loading")})}}),o(".awsm-export-applications-btn").insertAfter("#post-query-submit").fadeIn(),o(".awsm-shortcodes-filters-select-control").awsmSelect2({tags:!0,tokenSeparators:[","],theme:"awsm-job",dropdownCssClass:"awsm-select2-dropdown-control",createTag:function(){return null}}),o(".awsm-shortcodes-job-listing-control").on("change",function(){var e=o("#awsm-jobs-enable-filters-container");o("#awsm_jobs_listing_all").is(":checked")?e.removeClass("awsm-hide"):e.addClass("awsm-hide")}),o("#awsm-jobs-generate-shortcode").click(function(){var e=o("#awsm_jobs_enable_filters:checked").val(),t=o("#awsm_jobs_listings").val(),a=o("#awsm_jobs_pagination:checked").val(),s="[awsmjobs";if(s+=void 0===e||"yes"!==e?' filters="no"':"",s+=void 0!==t&&0<parseInt(t,10)?' listings="'+parseInt(t,10)+'"':"",s+=void 0===a||"yes"!==a?' loadmore="no"':"",o("#awsm_jobs_listing_filtered").is(":checked")){var i=[];o(".awsm-shortcodes-filters-select-control").each(function(){var e=o(this),t=e.val(),a=e.data("filter"),s=e.parents(".awsm-shortcodes-filter-item").find(".awsm-check-toggle-control:checked").val();null!==t&&void 0!==a&&"yes"===s&&i.push(a+":"+t.join(" "))}),0<i.length&&(s+=' specs="'+i.join(",")+'"')}s+="]",o(".awsm-settings-shortcodes-wrapper code").text(s),o("#awsm-copy-clip").attr("data-clipboard-text",s)})});